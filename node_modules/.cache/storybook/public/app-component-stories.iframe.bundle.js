(self["webpackChunk_org_source"] = self["webpackChunk_org_source"] || []).push([["app-component-stories"],{

/***/ "./todo/src/app/app.component.stories.ts":
/*!***********************************************!*\
  !*** ./todo/src/app/app.component.stories.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Primary: () => (/* binding */ Primary),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _storybook_angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @storybook/angular */ "./node_modules/@storybook/angular/dist/index.mjs");
/* harmony import */ var _app_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./app.component */ "./todo/src/app/app.component.ts");
/* harmony import */ var _angular_common_http__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/common/http */ "./node_modules/@angular/common/fesm2022/http.mjs");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm2022/core.mjs");




const meta = {
  component: _app_component__WEBPACK_IMPORTED_MODULE_1__.AppComponent,
  title: 'AppComponent',
  decorators: [(0,_storybook_angular__WEBPACK_IMPORTED_MODULE_0__.applicationConfig)({
    providers: [(0,_angular_core__WEBPACK_IMPORTED_MODULE_2__.importProvidersFrom)(_angular_common_http__WEBPACK_IMPORTED_MODULE_3__.HttpClientModule)]
  })]
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (meta);
const Primary = {
  args: {}
};
// export const Heading: Story = {
//   args: {},
//   play: async ({ canvasElement }) => {
//     const canvas = within(canvasElement);
//     expect(canvas.getByText(/app works!/gi)).toBeTruthy();
//   },
// };

/***/ }),

/***/ "./todo/src/app/app.component.ts":
/*!***************************************!*\
  !*** ./todo/src/app/app.component.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AppComponent: () => (/* binding */ AppComponent)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.mjs");
/* harmony import */ var _app_component_html_ngResource__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./app.component.html?ngResource */ "./todo/src/app/app.component.html?ngResource");
/* harmony import */ var _app_component_scss_ngResource__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./app.component.scss?ngResource */ "./todo/src/app/app.component.scss?ngResource");
/* harmony import */ var _app_component_scss_ngResource__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_app_component_scss_ngResource__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm2022/core.mjs");
/* harmony import */ var _app_todo_service_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../app/todo-service.service */ "./todo/src/app/todo-service.service.ts");
/* harmony import */ var _data_share_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./data-share.service */ "./todo/src/app/data-share.service.ts");






let AppComponent = class AppComponent {
  ngOnInit() {
    this.todoService.getTodos().subscribe(todos => {
      console.log("Server Response - Todos: ", todos);
      this.allTodos = todos;
    });
  }
  constructor(todoEdit, todoService) {
    this.todoEdit = todoEdit;
    this.todoService = todoService;
    this.isLoading = false;
    this.selectedTodo = null;
  }
  editTodo(todo) {
    this.selectedTodo = todo;
  }
  addTodo(newTodo) {
    this.todoService.addTodo(newTodo).subscribe(response => {
      console.log("server response", response);
      this.allTodos.push(response);
      this.fetchTodos();
    });
  }
  updateTodo(updatedTodo) {
    this.todoService.updateTodo(updatedTodo.id, updatedTodo).subscribe(update => {
      const index = this.allTodos.findIndex(todo => todo.id === updatedTodo.id);
      if (index !== -1) {
        this.allTodos[index] = update;
      }
    });
    this.todoEdit.clearTodo();
  }
  handleTodoUpdated(updatedTodo) {
    this.todoEdit.selectedTodo$.subscribe(x => {
      this.selectedTodo = x;
    });
    console.log("todo", this.selectedTodo);
    if (this.selectedTodo) {
      const obj = {
        ...this.selectedTodo,
        name: updatedTodo.name
      };
      this.updateTodo(obj);
      this.selectedTodo = null;
    } else {
      this.addTodo(updatedTodo);
    }
  }
  deleteTodo(todoId) {
    console.log("delete", todoId);
    this.todoService.deleteTodo(todoId).subscribe(() => {
      this.allTodos = this.allTodos.filter(todo => todo.id !== todoId);
      this.fetchTodos();
    });
  }
  fetchTodos() {
    this.todoService.getTodos().subscribe(todos => {
      this.allTodos = todos;
    });
  }
  markCompleted(todo) {
    console.log("mark complete", todo);
    if (todo.id !== undefined) {
      this.todoService.markAsComplete(todo.id, !todo.complete).subscribe(() => {
        todo.complete = !todo.complete;
      });
    }
  }
  clearCompleted() {
    const completedTodoIds = this.allTodos.filter(todo => todo.complete && todo.id !== undefined).map(todo => todo.id);
    completedTodoIds.forEach(todoId => {
      this.todoService.deleteTodo(todoId).subscribe(() => {
        this.allTodos = this.allTodos.filter(todo => {
          return todo.id !== todoId;
        });
        this.fetchTodos();
      });
    });
  }
  static #_ = this.ctorParameters = () => [{
    type: _data_share_service__WEBPACK_IMPORTED_MODULE_3__.DataShareService
  }, {
    type: _app_todo_service_service__WEBPACK_IMPORTED_MODULE_2__.TodoServiceService
  }];
};
AppComponent = (0,tslib__WEBPACK_IMPORTED_MODULE_4__.__decorate)([(0,_angular_core__WEBPACK_IMPORTED_MODULE_5__.Component)({
  selector: "org-root",
  template: _app_component_html_ngResource__WEBPACK_IMPORTED_MODULE_0__,
  styles: [(_app_component_scss_ngResource__WEBPACK_IMPORTED_MODULE_1___default())]
}), (0,tslib__WEBPACK_IMPORTED_MODULE_4__.__metadata)("design:paramtypes", [_data_share_service__WEBPACK_IMPORTED_MODULE_3__.DataShareService, _app_todo_service_service__WEBPACK_IMPORTED_MODULE_2__.TodoServiceService])], AppComponent);

/***/ }),

/***/ "./todo/src/app/data-share.service.ts":
/*!********************************************!*\
  !*** ./todo/src/app/data-share.service.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DataShareService: () => (/* binding */ DataShareService)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.mjs");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm2022/core.mjs");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/dist/esm5/internal/BehaviorSubject.js");



let DataShareService = class DataShareService {
  constructor() {
    this.selectedTodo = new rxjs__WEBPACK_IMPORTED_MODULE_0__.BehaviorSubject(null);
    this.selectedTodo$ = this.selectedTodo.asObservable();
  }
  setTodo(todo) {
    this.selectedTodo.next(todo);
  }
  clearTodo() {
    this.selectedTodo.next(null);
  }
  static #_ = this.ctorParameters = () => [];
};
DataShareService = (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__decorate)([(0,_angular_core__WEBPACK_IMPORTED_MODULE_2__.Injectable)({
  providedIn: "root"
}), (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__metadata)("design:paramtypes", [])], DataShareService);

/***/ }),

/***/ "./todo/src/app/todo-service.service.ts":
/*!**********************************************!*\
  !*** ./todo/src/app/todo-service.service.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TodoServiceService: () => (/* binding */ TodoServiceService)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.mjs");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm2022/core.mjs");
/* harmony import */ var _angular_common_http__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/common/http */ "./node_modules/@angular/common/fesm2022/http.mjs");
/* harmony import */ var _environments_environment_development__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../environments/environment.development */ "./todo/src/environments/environment.development.ts");




let TodoServiceService = class TodoServiceService {
  constructor(http) {
    this.http = http;
    this.apiUrl = _environments_environment_development__WEBPACK_IMPORTED_MODULE_0__.environment.apiUrl;
  }
  getTodos() {
    return this.http.get(this.apiUrl);
  }
  addTodo(todo) {
    return this.http.post(this.apiUrl, todo);
  }
  deleteTodo(todoId) {
    return this.http.delete(`${this.apiUrl}/${todoId}`);
  }
  markAsComplete(todoId, status) {
    return this.http.patch(`${this.apiUrl}/${todoId}`, {
      complete: status
    });
  }
  updateTodo(id, updatedTodo) {
    return this.http.patch(`${this.apiUrl}/${id}`, updatedTodo);
  }
  static #_ = this.ctorParameters = () => [{
    type: _angular_common_http__WEBPACK_IMPORTED_MODULE_1__.HttpClient
  }];
};
TodoServiceService = (0,tslib__WEBPACK_IMPORTED_MODULE_2__.__decorate)([(0,_angular_core__WEBPACK_IMPORTED_MODULE_3__.Injectable)({
  providedIn: "root"
}), (0,tslib__WEBPACK_IMPORTED_MODULE_2__.__metadata)("design:paramtypes", [_angular_common_http__WEBPACK_IMPORTED_MODULE_1__.HttpClient])], TodoServiceService);

/***/ }),

/***/ "./todo/src/environments/environment.development.ts":
/*!**********************************************************!*\
  !*** ./todo/src/environments/environment.development.ts ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   environment: () => (/* binding */ environment)
/* harmony export */ });
const environment = {
  production: false,
  apiUrl: 'http://localhost:3000/api/todos'
};

/***/ }),

/***/ "./todo/src/app/app.component.scss?ngResource":
/*!****************************************************!*\
  !*** ./todo/src/app/app.component.scss?ngResource ***!
  \****************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

// Imports
var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ = __webpack_require__(/*! ../../../node_modules/css-loader/dist/runtime/noSourceMaps.js */ "./node_modules/css-loader/dist/runtime/noSourceMaps.js");
var ___CSS_LOADER_API_IMPORT___ = __webpack_require__(/*! ../../../node_modules/css-loader/dist/runtime/api.js */ "./node_modules/css-loader/dist/runtime/api.js");
var ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);
// Module
___CSS_LOADER_EXPORT___.push([module.id, `body {
  width: 100%;
  height: 100vh;
  background-color: hsl(235, 21%, 11%);
  font-family: system-ui;
}

.banner-con {
  width: 100%;
  height: 60vh;
}
.banner-con .banner {
  width: 100%;
  height: 100%;
  background: url('bg-desktop-dark.b69c129621b067f4.jpg');
  background-repeat: no-repeat;
  background-position: center;
  background-size: cover;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
}
.banner-con .banner .content {
  width: 600px;
  display: flex;
  justify-content: space-between;
  margin-top: 40vh;
}
.banner-con .banner .content h1 {
  letter-spacing: 3px;
  color: #fff;
}
.banner-con .banner .content img {
  height: 34px;
}`, ""]);
// Exports
module.exports = ___CSS_LOADER_EXPORT___.toString();


/***/ }),

/***/ "./todo/src/app/app.component.html?ngResource":
/*!****************************************************!*\
  !*** ./todo/src/app/app.component.html?ngResource ***!
  \****************************************************/
/***/ ((module) => {

"use strict";
module.exports = "<!-- <org-new-todos></org-new-todos> -->\n<div class=\"banner-con\">\n  <div class=\"banner\">\n    <div class=\"content\">\n      <h1>TODO</h1>\n      <img src=\"./img/icon-sun.svg\" alt />\n    </div>\n    <div class=\"todo\">\n      <org-new-todos\n        [selectedTodo]=\"selectedTodo\"\n        (todoUpdated)=\"handleTodoUpdated($event)\"\n      ></org-new-todos>\n      <org-todo-list\n        [todos]=\"allTodos\"\n        (deleteTodoItem)=\"deleteTodo($event)\"\n        (markAsComplete)=\"markCompleted($event)\"\n        (clearcompletedItems)=\"clearCompleted()\"\n        [selectedTodo]=\"selectedTodo\"\n      ></org-todo-list>\n    </div>\n  </div>\n</div>\n";

/***/ })

}]);
//# sourceMappingURL=app-component-stories.iframe.bundle.js.map