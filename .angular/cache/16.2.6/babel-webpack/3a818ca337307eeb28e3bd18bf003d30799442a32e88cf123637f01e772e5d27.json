{"ast":null,"code":"import { __decorate, __metadata } from \"tslib\";\nimport __NG_CLI_RESOURCE__0 from \"./app.component.html?ngResource\";\nimport __NG_CLI_RESOURCE__1 from \"./app.component.scss?ngResource\";\nimport { Component } from \"@angular/core\";\nimport { TodoServiceService } from \"../app/todo-service.service\";\nimport { DataShareService } from \"./data-share.service\";\nexport let AppComponent = class AppComponent {\n  ngOnInit() {\n    this.todoService.getTodos().subscribe(todos => {\n      console.log(\"Server Response - Todos: \", todos);\n      this.allTodos = todos;\n    });\n  }\n  constructor(todoEdit, todoService) {\n    this.todoEdit = todoEdit;\n    this.todoService = todoService;\n    this.isLoading = false;\n    this.selectedTodo = null;\n  }\n  editTodo(todo) {\n    this.selectedTodo = todo;\n  }\n  addTodo(newTodo) {\n    this.todoService.addTodo(newTodo).subscribe(response => {\n      console.log(\"server response\", response);\n      this.allTodos.push(response);\n      this.fetchTodos();\n    });\n  }\n  updateTodo(updatedTodo) {\n    this.todoService.updateTodo(updatedTodo.id, updatedTodo).subscribe(update => {\n      const index = this.allTodos.findIndex(todo => todo.id === updatedTodo.id);\n      if (index !== -1) {\n        this.allTodos[index] = update;\n      }\n    });\n  }\n  handleTodoUpdated(updatedTodo) {\n    this.todoEdit.selectedTodo$.subscribe(x => {\n      this.selectedTodo = x;\n    });\n    if (this.selectedTodo) {\n      this.updateTodo(updatedTodo);\n    } else {\n      this.addTodo(updatedTodo);\n    }\n    this.selectedTodo = null;\n  }\n  deleteTodo(todoId) {\n    console.log(\"delete\", todoId);\n    this.todoService.deleteTodo(todoId).subscribe(() => {\n      this.allTodos = this.allTodos.filter(todo => todo.id !== todoId);\n      this.fetchTodos();\n    });\n  }\n  fetchTodos() {\n    this.todoService.getTodos().subscribe(todos => {\n      this.allTodos = todos;\n    });\n  }\n  markCompleted(todo) {\n    console.log(\"mark complete\", todo);\n    if (todo.id !== undefined) {\n      this.todoService.markAsComplete(todo.id, !todo.complete).subscribe(() => {\n        todo.complete = !todo.complete;\n      });\n    }\n  }\n  clearCompleted() {\n    const completedTodoIds = this.allTodos.filter(todo => todo.complete && todo.id !== undefined).map(todo => todo.id);\n    completedTodoIds.forEach(todoId => {\n      this.todoService.deleteTodo(todoId).subscribe(() => {\n        this.allTodos = this.allTodos.filter(todo => {\n          return todo.id !== todoId;\n        });\n        this.fetchTodos();\n      });\n    });\n  }\n  static #_ = this.ctorParameters = () => [{\n    type: DataShareService\n  }, {\n    type: TodoServiceService\n  }];\n};\nAppComponent = __decorate([Component({\n  selector: \"org-root\",\n  template: __NG_CLI_RESOURCE__0,\n  styles: [__NG_CLI_RESOURCE__1]\n}), __metadata(\"design:paramtypes\", [DataShareService, TodoServiceService])], AppComponent);","map":{"version":3,"names":["__decorate","__metadata","__NG_CLI_RESOURCE__0","__NG_CLI_RESOURCE__1","Component","TodoServiceService","DataShareService","AppComponent","ngOnInit","todoService","getTodos","subscribe","todos","console","log","allTodos","constructor","todoEdit","isLoading","selectedTodo","editTodo","todo","addTodo","newTodo","response","push","fetchTodos","updateTodo","updatedTodo","id","update","index","findIndex","handleTodoUpdated","selectedTodo$","x","deleteTodo","todoId","filter","markCompleted","undefined","markAsComplete","complete","clearCompleted","completedTodoIds","map","forEach","_","ctorParameters","type","selector","template","styles"],"sources":["/Users/macbookpro/OneSchool/todo app/todo-app/todo/src/app/app.component.ts"],"sourcesContent":["import { __decorate, __metadata } from \"tslib\";\nimport __NG_CLI_RESOURCE__0 from \"./app.component.html?ngResource\";\nimport __NG_CLI_RESOURCE__1 from \"./app.component.scss?ngResource\";\nimport { Component } from \"@angular/core\";\nimport { TodoServiceService } from \"../app/todo-service.service\";\nimport { DataShareService } from \"./data-share.service\";\nexport let AppComponent = class AppComponent {\n    ngOnInit() {\n        this.todoService.getTodos().subscribe((todos) => {\n            console.log(\"Server Response - Todos: \", todos);\n            this.allTodos = todos;\n        });\n    }\n    constructor(todoEdit, todoService) {\n        this.todoEdit = todoEdit;\n        this.todoService = todoService;\n        this.isLoading = false;\n        this.selectedTodo = null;\n    }\n    editTodo(todo) {\n        this.selectedTodo = todo;\n    }\n    addTodo(newTodo) {\n        this.todoService.addTodo(newTodo).subscribe((response) => {\n            console.log(\"server response\", response);\n            this.allTodos.push(response);\n            this.fetchTodos();\n        });\n    }\n    updateTodo(updatedTodo) {\n        this.todoService\n            .updateTodo(updatedTodo.id, updatedTodo)\n            .subscribe((update) => {\n            const index = this.allTodos.findIndex((todo) => todo.id === updatedTodo.id);\n            if (index !== -1) {\n                this.allTodos[index] = update;\n            }\n        });\n    }\n    handleTodoUpdated(updatedTodo) {\n        this.todoEdit.selectedTodo$.subscribe((x) => {\n            this.selectedTodo = x;\n        });\n        if (this.selectedTodo) {\n            this.updateTodo(updatedTodo);\n        }\n        else {\n            this.addTodo(updatedTodo);\n        }\n        this.selectedTodo = null;\n    }\n    deleteTodo(todoId) {\n        console.log(\"delete\", todoId);\n        this.todoService.deleteTodo(todoId).subscribe(() => {\n            this.allTodos = this.allTodos.filter((todo) => todo.id !== todoId);\n            this.fetchTodos();\n        });\n    }\n    fetchTodos() {\n        this.todoService.getTodos().subscribe((todos) => {\n            this.allTodos = todos;\n        });\n    }\n    markCompleted(todo) {\n        console.log(\"mark complete\", todo);\n        if (todo.id !== undefined) {\n            this.todoService.markAsComplete(todo.id, !todo.complete).subscribe(() => {\n                todo.complete = !todo.complete;\n            });\n        }\n    }\n    clearCompleted() {\n        const completedTodoIds = this.allTodos\n            .filter((todo) => todo.complete && todo.id !== undefined)\n            .map((todo) => todo.id);\n        completedTodoIds.forEach((todoId) => {\n            this.todoService.deleteTodo(todoId).subscribe(() => {\n                this.allTodos = this.allTodos.filter((todo) => {\n                    return todo.id !== todoId;\n                });\n                this.fetchTodos();\n            });\n        });\n    }\n    static { this.ctorParameters = () => [\n        { type: DataShareService },\n        { type: TodoServiceService }\n    ]; }\n};\nAppComponent = __decorate([\n    Component({\n        selector: \"org-root\",\n        template: __NG_CLI_RESOURCE__0,\n        styles: [__NG_CLI_RESOURCE__1]\n    }),\n    __metadata(\"design:paramtypes\", [DataShareService,\n        TodoServiceService])\n], AppComponent);\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}