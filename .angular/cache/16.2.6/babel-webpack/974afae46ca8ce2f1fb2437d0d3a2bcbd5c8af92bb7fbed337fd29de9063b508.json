{"ast":null,"code":"import { __decorate, __metadata } from \"tslib\";\nimport __NG_CLI_RESOURCE__0 from \"./app.component.html?ngResource\";\nimport __NG_CLI_RESOURCE__1 from \"./app.component.scss?ngResource\";\nimport { Component } from \"@angular/core\";\nimport { TodoServiceService } from \"../app/todo-service.service\";\nexport let AppComponent = class AppComponent {\n  ngOnInit() {\n    this.todoService.getTodos().subscribe(todos => {\n      console.log(\"Server Response - Todos: \", todos);\n      this.allTodos = todos;\n    });\n  }\n  constructor(todoService) {\n    this.todoService = todoService;\n    this.isLoading = false;\n    this.selectedTodo = null;\n  }\n  addTodo(newTodo) {\n    this.todoService.addTodo(newTodo).subscribe(response => {\n      console.log(\"server response\", response);\n      this.allTodos.push(response);\n      this.fetchTodos();\n    });\n  }\n  updateTodo(updatedTodo) {\n    this.todoService.updateTodo(updatedTodo.id, updatedTodo).subscribe(updatedTodoFromServer => {\n      const index = this.allTodos.findIndex(todo => todo.id === updatedTodo.id);\n      if (index !== -1) {\n        this.allTodos[index] = updatedTodoFromServer;\n      }\n    });\n  }\n  handleTodoUpdated(updatedTodo) {\n    if (this.selectedTodo) {\n      this.updateTodo(updatedTodo);\n    } else {\n      this.addTodo(updatedTodo);\n    }\n    this.selectedTodo = null; // Clear selected todo after updating or adding\n  }\n\n  deleteTodo(todoId) {\n    console.log(\"delete\", todoId);\n    this.todoService.deleteTodo(todoId).subscribe(() => {\n      this.allTodos = this.allTodos.filter(todo => todo.id !== todoId);\n      this.fetchTodos();\n    });\n  }\n  fetchTodos() {\n    this.todoService.getTodos().subscribe(todos => {\n      this.allTodos = todos;\n    });\n  }\n  markCompleted(todo) {\n    console.log(\"mark complete\", todo);\n    if (todo.id !== undefined) {\n      this.todoService.markAsComplete(todo.id, !todo.complete).subscribe(() => {\n        todo.complete = !todo.complete;\n      });\n    }\n  }\n  clearCompleted() {\n    const completedTodoIds = this.allTodos.filter(todo => todo.complete && todo.id !== undefined).map(todo => todo.id);\n    completedTodoIds.forEach(todoId => {\n      this.todoService.deleteTodo(todoId).subscribe(() => {\n        this.allTodos = this.allTodos.filter(todo => {\n          return todo.id !== todoId;\n        });\n        this.fetchTodos();\n      });\n    });\n  }\n  static #_ = this.ctorParameters = () => [{\n    type: TodoServiceService\n  }];\n};\nAppComponent = __decorate([Component({\n  selector: \"org-root\",\n  template: __NG_CLI_RESOURCE__0,\n  styles: [__NG_CLI_RESOURCE__1]\n}), __metadata(\"design:paramtypes\", [TodoServiceService])], AppComponent);","map":{"version":3,"names":["__decorate","__metadata","__NG_CLI_RESOURCE__0","__NG_CLI_RESOURCE__1","Component","TodoServiceService","AppComponent","ngOnInit","todoService","getTodos","subscribe","todos","console","log","allTodos","constructor","isLoading","selectedTodo","addTodo","newTodo","response","push","fetchTodos","updateTodo","updatedTodo","id","updatedTodoFromServer","index","findIndex","todo","handleTodoUpdated","deleteTodo","todoId","filter","markCompleted","undefined","markAsComplete","complete","clearCompleted","completedTodoIds","map","forEach","_","ctorParameters","type","selector","template","styles"],"sources":["/Users/macbookpro/OneSchool/todo app/todo-app/todo/src/app/app.component.ts"],"sourcesContent":["import { __decorate, __metadata } from \"tslib\";\nimport __NG_CLI_RESOURCE__0 from \"./app.component.html?ngResource\";\nimport __NG_CLI_RESOURCE__1 from \"./app.component.scss?ngResource\";\nimport { Component } from \"@angular/core\";\nimport { TodoServiceService } from \"../app/todo-service.service\";\nexport let AppComponent = class AppComponent {\n    ngOnInit() {\n        this.todoService.getTodos().subscribe((todos) => {\n            console.log(\"Server Response - Todos: \", todos);\n            this.allTodos = todos;\n        });\n    }\n    constructor(todoService) {\n        this.todoService = todoService;\n        this.isLoading = false;\n        this.selectedTodo = null;\n    }\n    addTodo(newTodo) {\n        this.todoService.addTodo(newTodo).subscribe((response) => {\n            console.log(\"server response\", response);\n            this.allTodos.push(response);\n            this.fetchTodos();\n        });\n    }\n    updateTodo(updatedTodo) {\n        this.todoService\n            .updateTodo(updatedTodo.id, updatedTodo)\n            .subscribe((updatedTodoFromServer) => {\n            const index = this.allTodos.findIndex((todo) => todo.id === updatedTodo.id);\n            if (index !== -1) {\n                this.allTodos[index] = updatedTodoFromServer;\n            }\n        });\n    }\n    handleTodoUpdated(updatedTodo) {\n        if (this.selectedTodo) {\n            this.updateTodo(updatedTodo);\n        }\n        else {\n            this.addTodo(updatedTodo);\n        }\n        this.selectedTodo = null; // Clear selected todo after updating or adding\n    }\n    deleteTodo(todoId) {\n        console.log(\"delete\", todoId);\n        this.todoService.deleteTodo(todoId).subscribe(() => {\n            this.allTodos = this.allTodos.filter((todo) => todo.id !== todoId);\n            this.fetchTodos();\n        });\n    }\n    fetchTodos() {\n        this.todoService.getTodos().subscribe((todos) => {\n            this.allTodos = todos;\n        });\n    }\n    markCompleted(todo) {\n        console.log(\"mark complete\", todo);\n        if (todo.id !== undefined) {\n            this.todoService.markAsComplete(todo.id, !todo.complete).subscribe(() => {\n                todo.complete = !todo.complete;\n            });\n        }\n    }\n    clearCompleted() {\n        const completedTodoIds = this.allTodos\n            .filter((todo) => todo.complete && todo.id !== undefined)\n            .map((todo) => todo.id);\n        completedTodoIds.forEach((todoId) => {\n            this.todoService.deleteTodo(todoId).subscribe(() => {\n                this.allTodos = this.allTodos.filter((todo) => {\n                    return todo.id !== todoId;\n                });\n                this.fetchTodos();\n            });\n        });\n    }\n    static { this.ctorParameters = () => [\n        { type: TodoServiceService }\n    ]; }\n};\nAppComponent = __decorate([\n    Component({\n        selector: \"org-root\",\n        template: __NG_CLI_RESOURCE__0,\n        styles: [__NG_CLI_RESOURCE__1]\n    }),\n    __metadata(\"design:paramtypes\", [TodoServiceService])\n], AppComponent);\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}